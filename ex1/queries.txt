
Primeiramente usamos os comando `use contratos`

1. Quantos registos estão na base de dados;

    db.contratos.countDocuments();

    Resposta: 36377

2. Quantos registos de contratos têm o tipo de procedimento com valor "Ajuste Direto Regime Geral"?

    db.contratos.countDocuments({ "tipoprocedimento": "Ajuste Direto Regime Geral" });

    Resposta: 17067

3. Qual a lista de entidades comunicantes (ordenada alfabeticamente e sem repetições)?

    db.contratos.distinct("entidade_comunicante").sort();

    Resposta:

        [
    'A ARCIAL - Associação para Recuperação de Cidadãos Inadaptados de Oliveira do Hospital',
    'A Oficina Centro de Artes e Mesteres Tradicionais de Guimarães, CIPRL',
    'A. D. A. M. - Águas do Alto Minho, S. A.',
    'ABIMOTA - Associação Nacional das Indústrias de Duas Rodas, Ferragens, Mobiliário e Afins',
    'ABMG - Águas do Baixo Mondego e Gândara, E. I. M., S. A.',
    'AC, Águas de Coimbra, E. M.',
    'ACA - Associação Casa da Arquitectura',
    'ACAPORAMA - Associação de Casas do Povo da Região Autonoma da Madeira',
    'ACISO - Associação Empresarial Ourém - Fátima',
    'ACLEM - Arte, Cultura e Lazer, Empresa Municipal, E. M.',
    'ACPMR - Associação Cluster Portugal Mineral Resources',
    'AD ELO Associação de Desenvolvimento Local da Bairrada e Mondego',
    'ADAE - Associação de Desenvolvimento da Alta Estremadura',
    'ADC - Águas da Covilhã, E. M.',
    'ADD - Associação de Desenvolvimento do Dão',
    'ADEMINHO - Associação para o Desenvolvimento do Ensino Profissional do Alto Minho Interior',
    'ADENE - Agência para a Energia',
    'ADEPTOLIVA - Associação para o Desenvolvimento do Ensino Profissional dos Concelhos de Tábua, Oliveira do Hospital e Arganil',
    'ADER-AL - Associação para o Desenvolvimento do Espaço Rural do Norte do Alentejo',
    'ADICE - Associação para o Desenvolvimento Integrado da Cidade de Ermesinde',
    'ADIRN - Associação para o Desenvolvimento Integrado do Ribatejo Norte',
    'ADIST - Associação para o Desenvolvimento do Instituto Superior Técnico',
    'ADL - Associação de Desenvolvimento do Litoral Alentejano',
    'ADP - Águas de Portugal Internacional - Serviços Ambientais, S. A.',
    'ADRAT - Associação de Desenvolvimento da Região do Alto Tâmega',
    'ADREPES - Associação de Desenvolvimento Regional da Península de Setúbal',
    'ADRIMAG - Associação de Desenvolvimento Rural Integrado das Serras de Montemuro, Arada e Gralheira',
    'ADVID - Associação para o Desenvolvimento da Viticultura Duriense',
    'ADXTUR - Agência para o Desenvolvimento Turístico das Aldeias do Xisto',
    'AEBB - Associação Empresarial da Beira Baixa',
    'AECRM-Associação Empresarial Concelho Rio Maior',
    'AEPM - Associação Equiterapêutica do Porto e Matosinhos',
    'AER - Associação Empresarial de Resende',
    'AEVA - Associação para a Educação e Valorização da Região de Aveiro',
    'AGERE- Empresa de Águas Efluentes e Resíduos de Braga, E. M.',
    'AIDA Assoc Industrial Distrito de Aveiro',
    'AMARSUL - Valorização e Tratamento de Resíduos Sólidos, S. A.',
    'AMBILITAL - Investimentos Ambientais no Alentejo, E. I. M.',
    'AMBISOUSA - Empresa Intermunicipal de Tratamento e Gestão de Residuos Sólidos, E.I.M.',
    'AMC - Vouga Associação de Municípios do Carvoeiro - Vouga',
    'AMCAL - Associação de Municípios do Alentejo Central',
    'ANI - Agência Nacional de Inovação, S. A.',
    'APA - Administração do Porto de Aveiro, S. A.',
    'APCB - Associação de Paralisia Cerebral de Braga',
    'APCTP - Associação do Parque de Ciência e Tecnologia do Porto',
    'APCV - Associação de Paralisia Cerebral de Viseu',
    'APEPO-Associação Para o Ensino Profissional do Oeste',
    'APFF - Administração do Porto da Figueira da Foz, S. A.',
    'APIN EIM, SA',
    'APL / Administração do Porto de Lisboa, SA',
    'APPACDM DE LISBOA - Associação Portuguesa de Pais e Amigos do Cidadão Deficiente Mental',
    'APPACDM de Coimbra - Associação Portuguesa de Pais e Amigos do Cidadão Deficiente Mental',
    'APPACDM de Mirandela - Associação Portuguesa de Pais e Amigos do Cidadão Deficiente Mental',
    'APPACDM de Portalegre - Associação Portuguesa de Pais e Amigos do Cidadão Deficiente Mental',
    'APPACDM de Setúbal - Associação Portuguesa de Pais e Amigos do Cidadão Deficiente Mental',
    'APPACDM de Soure',
    'APPACDM de Viana do Castelo - Associação Portuguesa de Pais e Amigos do Cidadão Deficiente Mental',
    'APPACDM do Porto -Associação Portuguesa de Pais e Amigos do Cidadão Deficiente Mental',
    'APPC - Associação do Porto de Paralisia Cerebral',
    'APPDA-Coimbra, Associação Portuguesa para as Perurbações do Desenvolvimento e Autismo de Coimbra',
    'APRAM - Administração dos Portos da Região Autónoma da Madeira, S. A.',
    'APS - Administração dos Portos de Sines e do Algarve, S. A.',
    'APSS ADMINISTRAÇÃO DOS PORTOS DE SETÚBAL E SESIMBRA S. A',
    'AQUANENA - Empresa Municipal de Águas e Saneamento de Alcanena, E. M., S. A.',
    'AR - Águas do Ribatejo, EIM, SA',
    'ARM - Águas e Resíduos da Madeira, S.A.',
    'AS - Empresa das Águas de Santarém, E. M, S. A.',
    'ASCUDT- Associação Sócio-Cultural dos Deficientes de Trás-os-Montes',
    'ASDOURO - Associação de Desenvolvimento do Ensino e Formação Profissional do Alto Douro',
    'ASSOL - Associação de Solidariedade Social de Lafões',
    'ATAHCA - Associação de Desenvolvimento das Terras Altas do Homem Cávado e Ave',
    'ATEC - Associação de Formação para a Indústria',
    'Activar - Associação de Cooperação da Lousã',
    'Actual Gest - Formação Profissional, L.da',
    'AdP - Águas de Portugal, SGPS, S.A',
    'AdP Energias - Energias Renováveis e Serviços Ambientais , S. A.',
    'AdP Valor - Serviços Ambientais, S. A.',
    'AdRA - Águas da Região de Aveiro, S. A.',
    'Administração Central do Sistema de Saúde, I. P.',
    'Administração Regional de Saúde de Lisboa e Vale do Tejo, I. P.',
    'Administração Regional de Saúde do Alentejo (ARSA)',
    'Administração Regional de Saúde do Alentejo, I. P.',
    'Administração Regional de Saúde do Algarve, I. P.',
    'Administração Regional de Saúde do Algarve, I.P.',
    'Administração Regional de Saúde do Centro, I. P.',
    'Administração Regional de Saúde do Centro,IP(ARSC)',
    'Administração Regional de Saúde do Norte, I. P.',
    'Administração Regional de Saúde do Norte,IP (ARSN)',
    'AgdA - Águas Públicas do Alentejo, S. A.',
    'Agrupamento Escolas de Colmeias',
    'Agrupamento Vertical de Canelas',
    'Agrupamento Vertical de Cristelo',
    'Agrupamento Vertical de Escolas de Almodôvar',
    'Agrupamento Vertical de Escolas de Arga e Lima',
    'Agrupamento Vertical de Escolas de Briteiros',
    'Agrupamento Vertical de Escolas de Freixo, Ponte de Lima',
    'Agrupamento Vertical de Escolas de Marco de Canaveses',
    'Agrupamento Vertical de Escolas de Paços de Ferreira',
    'Agrupamento Vertical de Escolas Álvaro Coutinho, O Magriço - Penedono',
    'Agrupamento Vertical de Perafita',
    ... 2120 more items
    ]

4. Qual a distribuição de contratos por tipo de procedimento (quantos contratos tem cada tipo de procedimento)?

    db.contratos.aggregate([ { $group: { _id: "$tipoprocedimento", total: { $sum: 1 } } } ]);

    Resposta: 

        [
        { _id: 'Consulta Prévia', total: 8000 },
        { _id: 'Ao abrigo de acordo-quadro (art.º 259.º)', total: 4678 },
        { _id: 'Concurso limitado por prévia qualificação', total: 53 },
        { _id: 'Procedimento de negociação', total: 1 },
        { _id: 'Ajuste Direto Regime Geral', total: 17067 },
        { _id: 'Contratação excluída II', total: 144 },
        { _id: 'Concurso público', total: 5300 },
        { _id: 'Ao abrigo de acordo-quadro (art.º 258.º)', total: 995 },
        { _id: 'Consulta Prévia Simplificada', total: 96 },
        {
            _id: 'Consulta prévia ao abrigo do artigo 7º da Lei n.º 30/2021, de 21.05',
            total: 1
        },
        { _id: 'Setores especiais – isenção parte II', total: 39 },
        { _id: 'Concurso público simplificado', total: 3 }
        ]

5. Qual o montante global por entidade comunicante (somatório dos contratos associados a uma entidade)?

    db.contratos.aggregate([ { $group: { _id: "$entidade_comunicante", total: { $sum: "$precoContratual" } } } ]);

    Resposta:

        [
        { _id: 'Fundação Mata do Buçaco, F. P.', total: 99658 },
        {
            _id: 'Unidade Local de Saúde de Loures-Odivelas, EPE',
            total: 619771
        },
        {
            _id: 'Centro de Formação Profissional da Indústria de Calçado',
            total: 163198
        },
        {
            _id: 'ProChild CoLab Against Poverty and Social Exclusion - Association',
            total: 5648
        },
        {
            _id: 'Instituto Nacional de Medicina Legal e Ciências Forenses, I. P.',
            total: 541556
        },
        {
            _id: 'CENCAL - Centro de Formação Profissional Para a Indústria de Ceramica',
            total: 6000
        },
        { _id: 'Instituto de Desenvolvimento Regional', total: 0 },
        { _id: 'Freguesia de Bendada', total: 18480 },
        { _id: 'Freguesia de Unhais da Serra', total: 0 },
        { _id: 'Unidade Local Saúde de Braga, E.P.E.', total: 108931 },
        {
            _id: 'Santa Casa da Misericórdia da Freguesia de Alfeizerão',
            total: 7180
        },
        {
            _id: 'PATRIRAM - Titularidade e Gestão de Património Público Regional, S. A.',
            total: 30852
        },
        { _id: 'Santa Casa da Misericórdia de Évora', total: 12500 },
        {
            _id: 'Serviços de Acção Social da Universidade de Trás-os-Montes e Alto Douro',
            total: 136772
        },
        { _id: 'Agrupamento de Escolas de Penacova', total: 14286 },
        {
            _id: 'Associação de Trabalhadores e Reformados da Portugal Telecom',
            total: 0
        },
        { _id: 'Município de Oliveira de Azeméis', total: 652931 },
        { _id: 'Direção-Geral do Ensino Superior', total: 0 },
        {
            _id: 'União das Freguesias de Montijo e Afonsoeiro',
            total: 313300
        },
        {
            _id: 'Direção Regional de Agricultura e Pescas do Centro',
            total: 36710
        }
        ]
